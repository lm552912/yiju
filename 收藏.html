<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>zhanshi</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/head.css">
    <link rel="stylesheet" href="css/foot.css">
    <link rel="stylesheet" href="css/zhanshi.css">
</head>
<body>
<div class="nav">
    <div class="nav_head">
        <a href="http://192.168.0.167/易居网初稿/首页.html" id="logo"></a>
        <div class="nav_search">
            <span>郑州</span>
            <i class="xl"></i>
            <i class="fg"></i>
            <input type="text">
            <button class="sousuo">
                <b></b>
                <i>搜房源</i>
            </button>
        </div>
        <div class="nav_login">
            <a href="##">我是昵称</a>

            <a href="http://192.168.0.167/易居网初稿/注册.html">注册</a>
        </div>
    </div>
</div>
<div class="zhanshi">
   <div class="zhanshi_left font">
    <div class="head_photo position"><img src="" alt=""></div>
       <p >我是昵称</p>
       <ul class="ul_nav">
           <li class="current_color">我的收藏</li>
           <li>我的发部</li>
           <li>浏览历史</li>
           <li>编辑资料</li>
       </ul>

   </div>
    <div class="zhanshi_right">
        <p id="p_1" class="p_1 p_head">我的收藏</p>
        <div class="search_nav">
            <span class="span_bgcolor">全部</span>
            <span class="price">价格
                 <i></i>
                 <i></i>
            </span>
            <span>面积</span>
        </div>
        <div class="content_ul">
        <ul class="show_house" id="select_1" style="display:block">
            <!--<li>
                <div class="li_left">
                    <img src="img/h1.png" alt="">
                    <div class="img_right">
                        <p class="p_1">曼哈顿 地铁口 家电齐全 三室两厅 <s></s> <s></s></p>
                        <p>三室两厅|合租|豪华装修|15/23层</p>
                        <p class="p_b"><b></b>曼哈顿 [金水路 燕庄 金水路未来路交汇处]</p>
                        <p class="p_i"><i>精装修</i> <i >地铁口</i ></p>
                    </div>
                </div>
                <div class="li_right">
                    <button>删除 ×</button>
                    <i class="right_i"> <span>2800</span>/月</i>
                    <span class="time">今天</span>
                </div>

            </li>
            <li class="li_2">
                <div class="li_left">
                    <img src="img/h2.png" alt="">
                    <div class="img_right">
                        <p class="p_1">曼哈顿 地铁口 家电齐全 三室两厅 <i class="per">(个人)</i></p>
                        <p>三室两厅|合租|豪华装修|15/23层</p>
                        <p class="p_b"><b></b>曼哈顿 [金水路 燕庄 金水路未来路交汇处]</p>
                        <p class="p_i"><i>家电齐全</i> <i >压1付1</i ></p>
                    </div>
                </div>
                <div class="li_right">
                    <button>删除 ×</button>
                    <i class="right_i"> <span>2800</span>/月</i>
                    <span class="time">今天</span>
                </div>

            </li>
            <li class="li_3">
                <div class="li_left">
                    <img src="img/h3.png" alt="">
                    <div class="img_right">
                        <p class="p_1">曼哈顿 地铁口 家电齐全 三室两厅 <i class="per">(个人)</i> <s></s></p>
                        <p>三室两厅|合租|豪华装修|15/23层</p>
                        <p class="p_b"><b></b>曼哈顿 [金水路 燕庄 金水路未来路交汇处]</p>
                        <p class="p_i"><i>精装修</i> <i >地铁口</i ></p>
                    </div>
                </div>
                <div class="li_right">
                    <button>删除 ×</button>
                    <i class="right_i"> <span>2800</span>/月</i>
                    <span class="time">今天</span>
                </div>

            </li>
            <li>
                <div class="li_left">
                    <img src="img/h4.png" alt="">
                    <div class="img_right">
                        <p class="p_1">曼哈顿 地铁口 家电齐全 三室两厅 <s></s> <s></s></p>
                        <p>三室两厅|合租|豪华装修|15/23层</p>
                        <p class="p_b"><b></b>曼哈顿 [金水路 燕庄 金水路未来路交汇处]</p>
                        <p class="p_i"><i>精装修</i> <i >地铁口</i ></p>
                    </div>
                </div>
                <div class="li_right">
                    <button>删除 ×</button>
                    <i class="right_i"> <span>2800</span>/月</i>
                    <span class="time">今天</span>
                </div>

            </li>
            <li>
                <div class="li_left">
                    <img src="img/h5.png" alt="">
                    <div class="img_right">
                        <p class="p_1">曼哈顿 地铁口 家电齐全 三室两厅 <s></s> <s></s></p>
                        <p>三室两厅|合租|豪华装修|15/23层</p>
                        <p class="p_b"><b></b>曼哈顿 [金水路 燕庄 金水路未来路交汇处]</p>
                        <p class="p_i"><i>精装修</i> <i >地铁口</i ></p>
                    </div>
                </div>
                <div class="li_right">
                    <button>删除 ×</button>
                    <i class="right_i"> <span>2800</span>/月</i>
                    <span class="time">今天</span>
                </div>

            </li>-->
        </ul>
        <ul class="show_house" id="select_2" style="display: none">
            <!--<li>
                <div class="li_left">
                    <img src="img/h1.png" alt="">
                    <div class="img_right">
                        <p class="p_1">曼哈顿 地铁口 家电齐全 三室两厅 <s></s> <s></s></p>
                        <p>三室两厅|合租|豪华装修|15/23层</p>
                        <p class="p_b"><b></b>曼哈顿 [金水路 燕庄 金水路未来路交汇处]</p>
                        <p class="p_i"><i>精装修</i> <i >地铁口</i ></p>
                    </div>
                </div>
                <div class="li_right">
                    <button class="edit">编辑 <i></i> </button>
                    <button>删除 ×</button>
                    <i class="right_i"> <span>2800</span>/月</i>
                    <span class="time">今天</span>
                </div>

            </li>
            <li class="li_2">
                <div class="li_left">
                    <img src="img/h2.png" alt="">
                    <div class="img_right">
                        <p class="p_1">曼哈顿 地铁口 家电齐全 三室两厅 <i class="per">(个人)</i></p>
                        <p>三室两厅|合租|豪华装修|15/23层</p>
                        <p class="p_b"><b></b>曼哈顿 [金水路 燕庄 金水路未来路交汇处]</p>
                        <p class="p_i"><i>家电齐全</i> <i >压1付1</i ></p>
                    </div>
                </div>
                <div class="li_right">
                    <button class="edit">编辑 <i></i> </button>
                    <button>删除 ×</button>
                    <i class="right_i"> <span>2800</span>/月</i>
                    <span class="time">今天</span>
                </div>

            </li>
            <li class="li_3">
                <div class="li_left">
                    <img src="img/h3.png" alt="">
                    <div class="img_right">
                        <p class="p_1">曼哈顿 地铁口 家电齐全 三室两厅 <i class="per">(个人)</i> <s></s></p>
                        <p>三室两厅|合租|豪华装修|15/23层</p>
                        <p class="p_b"><b></b>曼哈顿 [金水路 燕庄 金水路未来路交汇处]</p>
                        <p class="p_i"><i>精装修</i> <i >地铁口</i ></p>
                    </div>
                </div>
                <div class="li_right">
                    <button class="edit">编辑 <i></i> </button>
                    <button>删除 ×</button>
                    <i class="right_i"> <span>2800</span>/月</i>
                    <span class="time">今天</span>
                </div>

            </li>
            <li>
                <div class="li_left">
                    <img src="img/h4.png" alt="">
                    <div class="img_right">
                        <p class="p_1">曼哈顿 地铁口 家电齐全 三室两厅 <s></s> <s></s></p>
                        <p>三室两厅|合租|豪华装修|15/23层</p>
                        <p class="p_b"><b></b>曼哈顿 [金水路 燕庄 金水路未来路交汇处]</p>
                        <p class="p_i"><i>精装修</i> <i >地铁口</i ></p>
                    </div>
                </div>
                <div class="li_right">
                    <button class="edit">编辑 <i></i> </button>
                    <button>删除 ×</button>
                    <i class="right_i"> <span>2800</span>/月</i>
                    <span class="time">今天</span>
                </div>

            </li>
            <li>
                <div class="li_left">
                    <img src="img/h5.png" alt="">
                    <div class="img_right">
                        <p class="p_1">曼哈顿 地铁口 家电齐全 三室两厅 <s></s> <s></s></p>
                        <p>三室两厅|合租|豪华装修|15/23层</p>
                        <p class="p_b"><b></b>曼哈顿 [金水路 燕庄 金水路未来路交汇处]</p>
                        <p class="p_i"><i>精装修</i> <i >地铁口</i ></p>
                    </div>
                </div>
                <div class="li_right">
                    <button class="edit">编辑 <i></i> </button>
                    <button>删除 ×</button>
                    <i class="right_i"> <span>2800</span>/月</i>
                    <span class="time">今天</span>
                </div>

            </li>-->
        </ul>
        <ul class="show_house" id="select_3" style="display: none">
            <li>
                <div class="li_left">
                    <img src="img/h1.png" alt="">
                    <div class="img_right">
                        <p class="p_1">曼哈顿 地铁口 家电齐全 三室两厅 <s></s> <s></s></p>
                        <p>三室两厅|合租|豪华装修|15/23层</p>
                        <p class="p_b"><b></b>曼哈顿 [金水路 燕庄 金水路未来路交汇处]</p>
                        <p class="p_i"><i>精装修</i> <i >地铁口</i ></p>
                    </div>
                </div>
                <div class="li_right">
                    <i class="right_i"> <span>2800</span>/月</i>
                    <span class="time">今天</span>
                </div>

            </li>
            <li class="li_2">
                <div class="li_left">
                    <img src="img/h2.png" alt="">
                    <div class="img_right">
                        <p class="p_1">曼哈顿 地铁口 家电齐全 三室两厅 <i class="per">(个人)</i></p>
                        <p>三室两厅|合租|豪华装修|15/23层</p>
                        <p class="p_b"><b></b>曼哈顿 [金水路 燕庄 金水路未来路交汇处]</p>
                        <p class="p_i"><i>家电齐全</i> <i >压1付1</i ></p>
                    </div>
                </div>
                <div class="li_right">
                    <i class="right_i"> <span>2800</span>/月</i>
                    <span class="time">今天</span>
                </div>

            </li>
            <li class="li_3">
                <div class="li_left">
                    <img src="img/h3.png" alt="">
                    <div class="img_right">
                        <p class="p_1">曼哈顿 地铁口 家电齐全 三室两厅 <i class="per">(个人)</i> <s></s></p>
                        <p>三室两厅|合租|豪华装修|15/23层</p>
                        <p class="p_b"><b></b>曼哈顿 [金水路 燕庄 金水路未来路交汇处]</p>
                        <p class="p_i"><i>精装修</i> <i >地铁口</i ></p>
                    </div>
                </div>
                <div class="li_right">
                    <i class="right_i"> <span>2800</span>/月</i>
                    <span class="time">今天</span>
                </div>

            </li>
            <li>
                <div class="li_left">
                    <img src="img/h4.png" alt="">
                    <div class="img_right">
                        <p class="p_1">曼哈顿 地铁口 家电齐全 三室两厅 <s></s> <s></s></p>
                        <p>三室两厅|合租|豪华装修|15/23层</p>
                        <p class="p_b"><b></b>曼哈顿 [金水路 燕庄 金水路未来路交汇处]</p>
                        <p class="p_i"><i>精装修</i> <i >地铁口</i ></p>
                    </div>
                </div>
                <div class="li_right">
                    <i class="right_i"> <span>2800</span>/月</i>
                    <span class="time">今天</span>
                </div>

            </li>
            <li>
                <div class="li_left">
                    <img src="img/h5.png" alt="">
                    <div class="img_right">
                        <p class="p_1">曼哈顿 地铁口 家电齐全 三室两厅 <s></s> <s></s></p>
                        <p>三室两厅|合租|豪华装修|15/23层</p>
                        <p class="p_b"><b></b>曼哈顿 [金水路 燕庄 金水路未来路交汇处]</p>
                        <p class="p_i"><i>精装修</i> <i >地铁口</i ></p>
                    </div>
                </div>
                <div class="li_right">
                    <i class="right_i"> <span>2800</span>/月</i>
                    <span class="time">今天</span>
                </div>

            </li>
        </ul>
       <ul class="per_edit show_house " style="display: none">
           <li  >
               <div class="search_nav_ul">
                     <span class="span_bgcolor picture">上传头像</span>
                     <span class="price name">修改昵称</span>
                     <span class="pw">修改密码</span>
               </div>

           </li>

           <li class="li_picture" >
               <ul class="touxiang">
                   <li class="parent"><button class="bt">选择图片</button> <input type="file" id="uploadPhoto" name="uploadPhoto"></li>
                   <li><div id="box"><img src="img/daren.png" alt=""></div></li>
                   <li> <button class="save" id="bt_picture">保存</button> <button>取消</button></li>
               </ul>
           </li>
           <li class="li_name" style="display: none">
               <ul class="nicheng">
                   <li>   <p class="ni">设置昵称: <input type="text" name="lname"></p></li>
                   <li> <button class="save">保存</button> <button>取消</button></li>
               </ul>

           </li>
           <li style="display: none" class="li_pw">
               <ul>
                   <li><p class="p_pw ni"><span>当前密码</span><input type="password" class="pw1"></p></li>
                   <li><p  class="p_pw ni"><span>新密码</span><input type="text" name="lpassword" class="pw2"></p></li>
                   <li><p  class="p_pw ni"><span>再次输入</span><input type="text" class="pw3"></p></li>
                   <li> <button class="save">保存</button> <button>取消</button></li>
               </ul>
           </li>

      </ul>
        </div>
        <div class="right_foot" style="">
           <div>
           </div>
        </div>
    </div>
</div>
<div id="mask"></div>
<div class="popupBox">
    <i class="ok"></i><span>确定删除吗！</span>
    <!--<a href="http://192.168.0.175/yiju/01/login.html">马上登录>></a>-->
    <a href="###" class="sure">确定</a><a href="###" class="cancle" >取消</a>
    <i class="close"></i>
</div>
<div class="foot">
    <div class="foot_bottom">
        <div class="bottom_left">

            <ul class="f-clear">
                <li> 友情链接：</li>
                <li><a href="">武汉租房</a></li>
                <li><a href="">厨房电器品牌</a></li>
                <li><a href="">房汇网</a></li>
                <li><a href="">360搜房网</a></li>
                <li><a href="">无锡二手车</a></li>
                <li><a href="">合肥房产网</a></li>
                <li><a href="">房产论坛</a></li>
                <li><a href="">租房问答</a></li>
                <li><a href="">郑州租房</a></li>
                <li><a href="">郑州房价</a></li>
                <li><a href="">好租</a></li>
                <li><a href="">郑州租房</a></li>
                <br>
                <li><a href="">南山写字楼</a></li>
                <li><a href="">罗湖写字楼</a></li>
                <li><a href="">上海写字楼出租</a></li>
                <li><a href="">北京写字楼出租</a></li>
                <li><a href="">深圳写字楼出租做</a></li>
                <li><a href="">房产季</a></li>
                <li><a href="">好租</a></li>
            </ul>
            <hr class="line">
            <div class="copy">北京易居房产经纪有限公司<i></i>网络经营许可证 京ICP备11024601号-12</div>
            <p>©Copyright©2010-2016易居yiju.com版权所有</p>
        </div>
        <div class="bottom_right">
            <img src="img/code.png" alt="">
            <p class="sao">微信扫一扫 马上租房</p>
        </div>
    </div>
</div>
<script src="js/jquery-1.8.0.js"></script>
<script src="js/ajaxfileupload.js" type="text/javascript"></script>
<script>
    loginSession();//判断页面是否登录 如果登录的话就获取信息执行一些操作
    var currentvalue='';
    function loginSession(){
        $.ajax({ type:'post',
            url:'http://www.zhijunxing.com/yiju/loginSession.action',
            dataType:'jsonp',
            success:function(data){
                if(data.success){
                    currentvalue= data.data[0].lpassword;
                    $('.nav_login a').eq(0).html(data.data[0].lname).attr('href','http://192.168.0.167/易居网初稿/收藏.html')
                    $('.nav_login a').eq(1).html('退出').attr({onclick:'quitLogin()',href:'http://192.168.0.167/易居网初稿/首页.html'})
                    $('.zhanshi_left p').html(data.data[0].lname);
                    if(data.data[0].lphoto){
                        $('.head_photo img').attr('src','http://www.zhijunxing.com/yiju/upload/'+data.data[0].lphoto)
                    }else{
                       // alert('没有图片');
                    }
                }
                /*location.href = 'http://192.168.0.167/易居网初稿/登录.html';*/
            }
        });
    }

    function quitLogin(){
        $.ajax({ type:'post',
            url:'http://www.zhijunxing.com/yiju/quitLogin.action',
            dataType:'jsonp',
            success:function(data){
               // console.log(data);
                if(data.resultCode){
                    $('.nav_login a').eq(0).html('我是呢称').attr('href','http://192.168.0.170/易居网初稿/登录.html')
                    $('.nav_login a').eq(1).html('注册').removeAttr(onclick,'quitLogin()')
                }
            }
        })
    }

    //模拟添加

/*
    for (var i = 400; i < 600; i++) {
        $.ajax({
            type: 'get',
            url: 'http://www.zhijunxing.com/yiju/addCollect.action',
            dataType: 'jsonp',
            data: {
                hid: i
            },
            success: function (data) {
                console.log(data);
            }
        });
    }

*/










//委托事件 如果不用的话连接的外部的js  js/ajaxfileupload.js在执行一次后会把input 的事件给清除 所以要用委托事件
    $('.parent').change('input',function () {
        if (typeof FileReader == 'undefined') {
            alert("检测到您的浏览器不支持FileReader对象！");
        }
        var reader = new FileReader();
        reader.readAsDataURL($('#uploadPhoto').get(0).files[0]);

   console.log(reader);
        reader.onload = function () {
            $('#box img').attr('src', reader.result);
        }
    });



    //后台写好的图片接口
    $('#bt_picture').click(function () {
            $.ajaxFileUpload({
                type: 'post',
                url: 'http://www.zhijunxing.com/yiju/uqdateLandlord.action',
                secureuri: false,
                fileElementId:'uploadPhoto',
                async: true,
                cache: true,
                dataType: 'json',
                contentType: 'application/x-www-form-urlencoded;charset=UTF-8',
                success: function(data){
                    console.log(data);
                    // alert(111);
                }
            });
        setTimeout(loginSession,1000)
    })

    //修改昵称-------------------------------------------
$('.nicheng input').on({
    'focus':function(){
    $(this).css({borderColor:'#70ad46'})
    },
    'blur':function(){
    val=$(this).val()
    if(/[0-9a-zA-Z]{6,20}/.test(val)){

        $('.nicheng .save').click(function(){
            $.ajax({
                type: 'post',
                url: 'http://www.zhijunxing.com/yiju/uqdateLandlord.action',
                dataType: 'jsonp',
                data: {
                    lname: val
                },
                success: function (data) {
                    console.log(data);
                    if (data.resultCode == '0000') {
                        loginSession();
                    }
                }

            })
        })

    }
}});
    //修改密码-------------------------------------------
    var off={};
    $('.li_pw input').focus(function(){
        $(this).css({borderColor:'#70ad46'})
    })

    $('.li_pw input').eq(0).blur(function(){
        val=$(this).val();
        console.log(currentvalue);
        if((!(val===currentvalue))||(val==='')){
            $(this).css({borderColor:'red'});
            off[this.className]=false;
        }else{
            off[this.className]=true;
        }
        ///console.log(off);
    });
    $('.li_pw input').eq(1).blur(function(){
        val=$(this).val();
        if(/[0-9a-zA-Z]{6,20}/.test(val)){
            off[this.className]=true;
        }else{
            $(this).css({borderColor:'red'})
            off[this.className]=false;
        }
    });

    $('.li_pw input').eq(2).blur(function(){
        val=$(this).val();
        if(val==$('.li_pw input').eq(1).val()){
            off[this.className]=true;
        }else{
            $(this).css({borderColor:'red'})
            alert('两次输入的密码不同')
            off[this.className]=false;
        }
    });

$('.li_pw .save').click(function(){
       var ss=true;
    for( var i in off){
        if(!off[i]){
            ss=false;
        }
    }
    if(ss){
        $.ajax({
            type: 'post',
            url: 'http://www.zhijunxing.com/yiju/uqdateLandlord.action',
            dataType: 'jsonp',
            data: {
                lpassword:$('.li_pw [name="lpassword"]').val()
            },
            success:function(data){
                console.log(data);
                if(data.resultCode=='0000'){
                   loginSession();
               }
            }
        })

}
})













    $('.ul_nav li').hover(function(){
        $(this).addClass('current_color').siblings().removeClass('current_color')
    },function(){
    });
    $('.ul_nav li').click(function(){

        $('#p_1').html($(this).html());
        var s=$(this).index();
      /*  console.log(s)*/
        if(s==2){
            $('.search_nav').hide();
            $('.content_ul ul').eq(s).show().siblings().hide();
            $('.right_foot').show();

        } else if(s==0||s==1){
            $('.search_nav').show();
            $('.content_ul ul').eq(s).show().siblings().hide();
            $('.search_nav span').eq(0).html('全部');
            $('.search_nav span').eq(1).html('价格');
            $('.search_nav span').eq(2).html('面积');
            $('.right_foot').show();
        }

        else if(s==3){
            $('.search_nav').hide()

            $('.content_ul ul').eq(s).show().siblings().hide();
            $('.right_foot').hide();

        }
    })
    $('.search_nav_ul span').on({'hover':function(){
        $(this).addClass('span_bgcolor').siblings().removeClass('span_bgcolor')
         },
        'click':function(){
          var  index =$(this).index()
            $(this).addClass('span_bgcolor')
            $(this).addClass('span_bgcolor').siblings().removeClass('span_bgcolor')
            //console.log(index);
            if(index==0){
                $('.li_picture').show();
                $('.li_name').hide();
                $('.li_pw').hide();
            }
            if(index==1){
                $('.li_picture').hide()
                $('.li_name').show();
                $('.li_pw').hide();
            }
            if(index==2){
                $('.li_picture').hide();
                $('.li_name').hide();
                $('.li_pw').show();
            }
        }
    })












 // 收藏页面
    var pageNo = 1;
    $('.ul_nav li').eq(0).click(function () {
        pageNo = 1;
        Collect(pageNo);
        $('.right_foot div').on('click', 'a', function () {
            if ($(this).html() == '上一页') {
                if (!(pageNo == 1)) {
                    pageNo -= 1;
                    Collect(pageNo);
                }
            } else if ($(this).html() == '下一页') {
                if (!(pageNo == $('.right_foot div a').last().prev().html())) {
                    pageNo += 1;
                    Collect(pageNo);
                }
            } else {
                pageNo = parseInt($(this).html());
                Collect(pageNo);
            }

        });

    }).click();

function Collect(pageNo) {
    $.ajax({
        type: 'post',
        url: 'http://www.zhijunxing.com/yiju/queryCollectHouses.action',
        dataType: 'jsonp',
        data: {
            pageNo:pageNo
        },
        success: function (data) {
            console.log(data.rowCount);
            console.log(data);
           //data.rowCount=20
            var a;
            if (parseInt(data.rowCount / 2) <= 5) {
                a = '<a>上一页</a>'
                for (var i = 1; i <= Math.ceil(data.rowCount / 2); i++) {
                    if (i == pageNo) {
                        a += '<a href="###" class="page-checked">' + i + '</a>'
                    } else {
                        a += '<a href="###">' + i + '</a>'
                    }
                }
                a+='<a>下一页</a>'
            }else{
                if(pageNo<=3){
                    a = '<a>上一页</a>'
                    for (var i = 1; i <= 4; i++) {
                        if (i == pageNo) {
                            a += '<a href="###" class="page-checked">' + i + '</a>'
                        } else {
                            a += '<a href="###">' + i + '</a>'
                        }
                    }
                    a+='<b>.....</b>'+'<a>'+Math.ceil(data.rowCount/2)+'</a>'+'<a>下一页</a>'
                }else{
                    if((pageNo+2)<Math.ceil(data.rowCount/2)){
                        a = '<a href="###">上一页</a>' +
                                '<a href="###">1</a>' +
                                '<b> ··· </b>' +
                                '<a href="###">' + (parseInt(pageNo) - 1) + '</a>' +
                                '<a href="###" class="page-checked">' + pageNo + '</a>' +
                                '<a href="###">' + (parseInt(pageNo) + 1) + '</a>' +
                                '<b> ··· </b>' +
                                '<a href="###">' + Math.ceil(data.rowCount / 2) + '</a>' +
                                '<a href="###">下一页</a>';
                    }else{
                        a = '<a href="###">上一页</a>' +
                                '<a href="###">1</a>'+
                                '<b> ··· </b>'
                        for(i=3;i>=0;i--){
                            if((Math.ceil(data.rowCount / 2)-i)==pageNo){
                                a+='<a href="###" class="page-checked">' +(Math.ceil(data.rowCount / 2)-i) + '</a>'
                            }else{
                                a+='<a href="###">'+(Math.ceil(data.rowCount / 2)-i)+'</a>'
                            }
                        }
                        a+='</a>'+'<a href="###">下一页</a>'
                    }
                }
            }
            $('.right_foot div').html(a);
        var content='';
             for(var i in data.data){
            content+='<li id="'+ data.data[i].id+'"><div class="li_left"><img src="http://www.zhijunxing.com/yiju/upload/' + data.data[i].photo.split(',')[0]+'" alt="" style="width:218px;height:160px;">'+
                    '<div class="img_right"><p class="p_1">'+data.data[i].hcondition+data.data[i].tittle+'<i class="per">'+data.data[i].type +'</i></p><p>'+data.data[i].room+'|'+data.data[i].rentway+'|'+data.data[i].hlevel+'|'+data.data[i].floor+'/'+data.data[i].countfloor+'</p><p class="p_b"><b></b>'+data.data[i].address +'</p><p class="p_i"><i>'+data.data[i].hlevel +'</i><i>'+data.data[i].hlevel +'</i></p></div></div>'
                  +'<div class="li_right"><button id="">删除×</button><i class="right_i"><span>'+data.data[i].price+'</span>/月</i><span class="time">'+data.data[i].addtime+'</span></div></li>'
             }
            $('.content_ul #select_1').html(content);
             }
    })
}





$('.content_ul').on('click','button',function(){
    alert(0)
    console.log(0);
    $.ajax({
        type: 'get',
        url: 'http://www.zhijunxing.com/yiju/delCollect.action',
        dataType: 'jsonp',
        data: {
            hid:$(this).parent('div').parent('li').attr('id')
        } ,
        success:function(data){
          console.log(data.resultCode)
            if(data.resultCode=='0000'){

                alert('取消成功')
            }
        }
    })
    $(this).parent('div').parent('li').remove();
    Collect(pageNo);
});


/*
    $('.content_ul').on('click','button',function(){
        $('#mask').show();
        $('.popupBox').show();
    });
    $('.popupBox .cancle').click(function(){
        $('#mask').hide();
        $('.popupBox').hide();
    })

    $('.popupBox .sure').click(function(){

        $.ajax({
            type: 'get',
            url: 'http://www.zhijunxing.com/yiju/delCollect.action',
            dataType: 'jsonp',
            data: {
                hid:$(this).parent('div').parent('li').attr('id')
            } ,
            success:function(data){
                console.log(data.resultCode)
                if(data.resultCode=='0000'){

                    alert('取消成功')
                }
            }
        })
        $(this).parent('div').parent('li').remove();
        Collect(pageNo);
        $('#mask').hide();
        $('.popupBox').hide();
    })
*/

    /*

        function Collect(pageNo) {
            $.ajax({
                type: 'post',
                url: 'http://www.zhijunxing.com/yiju/queryCollectHouses.action',
                dataType: 'jsonp',
                data: {
                    pageNo: pageNo
                },
                success: function (data) {
                    console.log(data.rowCount);
                    if(data.rowCount=7){}
                    console.log(data);
                          if (data.success) {
                        var a;
                        if (Math.ceil(data.rowCount / 2) <= 5  ) {

                            a = '<a href="###">上一页</a>';
                            for (var i = 1; i <= Math.ceil(data.rowCount / 2); i++) {
                                if (i == pageNo) {
                                    a += '<a href="###" class="page-checked">' + i + '</a>'
                                } else {
                                    a += '<a href="###">' + i + '</a>'
                                }
                            }
                            a += '<a href="###">下一页</a>';

                        } else if (pageNo <= 3  ) {

                            a = '<a href="###">上一页</a>';
                            for (var i = 1; i <= 4; i++) {
                                if (i == pageNo) {
                                    a += '<a href="###" class="page-checked">' + i + '</a>'
                                } else {
                                    a += '<a href="###">' + i + '</a>'
                                }
                            }
                            a += '<b> ··· </b><a href="###">' + Math.ceil(data.rowCount / 2) + '</a><a href="###">下一页</a>';

                        } else if (pageNo + 2 >= Math.ceil(data.rowCount / 2)) {
                            a = '<a href="###">上一页</a>' +
                                    '<a href="###">1</a>' +
                                    '<b> ··· </b>';
                            for (var i = 3; i >= 0; i--) {
                                if (Math.ceil(data.rowCount / 2) - i == pageNo) {
                                    a += '<a href="###" class="page-checked">' + (Math.ceil(data.rowCount / 2) - i) + '</a>'
                                } else {
                                    a += '<a href="###">' + (Math.ceil(data.rowCount / 2) - i) + '</a>'
                                }
                            }
                            a += '<a href="###">下一页</a>';

                        } else if (pageNo + 2 < Math.ceil(data.rowCount / 2)) {
                            a = '<a href="###">上一页</a>' +
                                    '<a href="###">1</a>' +
                                    '<b> ··· </b>' +
                                    '<a href="###">' + (parseInt(pageNo) - 1) + '</a>' +
                                    '<a href="###" class="page-checked">' + pageNo + '</a>' +
                                    '<a href="###">' + (parseInt(pageNo) + 1) + '</a>' +
                                    '<b> ··· </b>' +
                                    '<a href="###">' + Math.ceil(data.rowCount / 2) + '</a>' +
                                    '<a href="###">下一页</a>';
                        }
                        $('.page-box').html(a);

                        var item = '';
                        for (var i=0 ;i<data.data.length;i++) {
                            item += '<li class="j-clear" id="'+data.data[i].id+'"><div  class="center-l center-img1">' +
                                    '<img src="http://www.zhijunxing.com/yiju/upload/' + data.data[i].photo.split(',')[0]+'" alt="" style="width: 100%;height: 100%;">' + '</div>' +
                                    '<div class="center-m"><p>'+data.data[i].tittle+'  '+data.data[i].room+'<b>'+data.data[i].type+'</b><a href="###"><i class="ren"></i></a><a href="###"><i class="cheng"></i></a></p><span>'+data.data[i].room+' | '+data.data[i].rentway+' | '+data.data[i].hlevel+' | '+data.data[i].floor+'/'+data.data[i].countfloor+'层</span><span><i class="location"></i>'+data.data[i].address+'</span><s>'+data.data[i].hlevel+'</s><u>'+data.data[i].hlevel+'</u></div>' +
                                    '<div class="center-r"><a href="###">删除 <i class="del"></i></a><p><span>'+data.data[i].price+'</span>/月</p><s>'+data.data[i].addtime+'</s></div>' +
                                    '</li>'
                        }
                        $('.center-content-shou ul').html(item);








                    } else {

                        alert('您没有收藏房源！');
                    }
                }
            })
        }



    */

//--------------我的发布-----------------------------------

    $('.ul_nav li').eq(1).click(function () {
        pageNo = 1;
        Collect2(pageNo);
        $('.right_foot div').on('click', 'a', function () {
            if ($(this).html() == '上一页') {
                if (!(pageNo == 1)) {
                    pageNo -= 1;
                    Collect2(pageNo);
                }
            } else if ($(this).html() == '下一页') {
                if (!(pageNo == $('.right_foot div a').last().prev().html())) {
                    pageNo += 1;
                    Collect2(pageNo);
                }
            } else {
                pageNo = parseInt($(this).html());
                Collect2(pageNo);
            }

        });

    });

    function Collect2(pageNo) {
        $.ajax({
            type: 'post',
            url: 'http://www.zhijunxing.com/yiju/queryHousesBylid.action',
            dataType: 'jsonp',
            data: {
                pageNo:pageNo
            },
            success: function (data) {
                console.log(data.rowCount);
                console.log(data);
                //data.rowCount=20
                var a;
                if (parseInt(data.rowCount / 2) <= 5) {
                    a = '<a>上一页</a>'
                    for (var i = 1; i <= Math.ceil(data.rowCount / 2); i++) {
                        if (i == pageNo) {
                            a += '<a href="###" class="page-checked">' + i + '</a>'
                        } else {
                            a += '<a href="###">' + i + '</a>'
                        }
                    }
                    a+='<a>下一页</a>'
                }else{
                    if(pageNo<=3){
                        a = '<a>上一页</a>'
                        for (var i = 1; i <= 4; i++) {
                            if (i == pageNo) {
                                a += '<a href="###" class="page-checked">' + i + '</a>'
                            } else {
                                a += '<a href="###">' + i + '</a>'
                            }
                        }
                        a+='<b>.....</b>'+'<a>'+Math.ceil(data.rowCount/2)+'</a>'+'<a>下一页</a>'
                    }else{
                        if((pageNo+2)<Math.ceil(data.rowCount/2)){
                            a = '<a href="###">上一页</a>' +
                                    '<a href="###">1</a>' +
                                    '<b> ··· </b>' +
                                    '<a href="###">' + (parseInt(pageNo) - 1) + '</a>' +
                                    '<a href="###" class="page-checked">' + pageNo + '</a>' +
                                    '<a href="###">' + (parseInt(pageNo) + 1) + '</a>' +
                                    '<b> ··· </b>' +
                                    '<a href="###">' + Math.ceil(data.rowCount / 2) + '</a>' +
                                    '<a href="###">下一页</a>';
                        }else{
                            a = '<a href="###">上一页</a>' +
                                    '<a href="###">1</a>'+
                                    '<b> ··· </b>'
                            for(i=3;i>=0;i--){
                                if((Math.ceil(data.rowCount / 2)-i)==pageNo){
                                    a+='<a href="###" class="page-checked">' +(Math.ceil(data.rowCount / 2)-i) + '</a>'
                                }else{
                                    a+='<a href="###">'+(Math.ceil(data.rowCount / 2)-i)+'</a>'
                                }
                            }
                            a+='</a>'+'<a href="###">下一页</a>'
                        }
                    }
                }
                $('.right_foot div').html(a);
                var content2='';
                for(var i in data.data){
                    content2+='<li id="'+ data.data[0].id+'"><div class="li_left"><img src="http://www.zhijunxing.com/yiju/upload/' + data.data[i].photo.split(',')[0]+'" alt="" style="width:218px;height:160px;">'+
                            '<div class="img_right"><p class="p_1">'+data.data[i].hcondition+data.data[i].tittle+'<i class="per">'+data.data[i].type +'</i></p><p>'+data.data[i].room+'|'+data.data[i].rentway+'|'+data.data[i].hlevel+'|'+data.data[i].floor+'/'+data.data[i].countfloor+'</p><p class="p_b"><b></b>'+data.data[i].address +'</p><p class="p_i"><i>'+data.data[i].hlevel +'</i><i>'+data.data[i].hlevel +'</i></p></div></div>'
                            +'<div class="li_right"><button class="edit">编辑 <i></i> </button><button id="">删除×</button><i class="right_i"><span>'+data.data[i].price+'</span>/月</i><span class="time">'+data.data[i].addtime+'</span></div></li>'
                }
                $('.content_ul #select_2').html(content2);
            }
        })
    }



</script>
</body>
</html>